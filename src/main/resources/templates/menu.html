<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home</title>

<link rel="stylesheet" href="/home.css">

<!-- Estilos de Bootstrap -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"
	integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
	crossorigin="anonymous"></script>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
	crossorigin="anonymous">
	
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
	rel="stylesheet">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
	crossorigin="anonymous"></script>
</head>

<body>
	<!--Main Navigation-->
	<header>
		<!-- Jumbotron -->
		<div class="p-3 text-center border-bottom bg-black">
			<div class="container">
				<div class="row gy-3">
					<!-- Left elements -->
					<div class="col-lg-2 col-sm-4 col-4">
						<img src="/img/logo.jpeg" alt="Logo" height="90"
							class="rounded-circle" />
					</div>
					<!-- Left elements -->

					<!-- Right elements -->
					<div class="order-lg-last col-lg-5 col-sm-8 col-8">
						<div class="d-flex float-end">
							<a class="btn btn-link" data-toggle="modal"
								data-target="#exampleModal"> <svg class="bi bi-cart3"
									width="1.5em" height="1.5em" viewBox="0 0 16 16"
									fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd"
										d="M1 1a.5.5 0 0 1 .5-.5h1.7l1.88 6.785a.5.5 0 0 0 .48.365h8.31a.5.5 0 0 0 .48-.365L13.8 3.5h1.7a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3.612l-.47 1.692a.5.5 0 0 0 .48.608h8.682a1.5 1.5 0 1 0 1.342-2H4.572l-.47 1.692a.5.5 0 0 0 .48.608h5.747a.5.5 0 1 1 0 1H4.682l-.47 1.692a.5.5 0 0 0 .48.608h5.566a1.5 1.5 0 1 0 1.342-2H4.196l-.47 1.692a.5.5 0 0 0 .48.608h3.905a.5.5 0 1 1 0 1H3.887a1.5 1.5 0 1 0 1.342-2H2.646l-.47 1.692a.5.5 0 0 0 .48.608H5.38a.5.5 0 1 1 0 1H2.128a1.5 1.5 0 1 0 1.342-2H1V1z" />
            </svg> <span th:text="${cant_carrito}" class="badge badge-danger"></span>
							</a> <a th:href="@{/logout}"
								class="me-1 border rounded py-1 px-3 nav-link d-flex align-items-center">
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
									fill="currentColor" class="bi bi-suit-heart-fill text-white"
									viewBox="0 0 16 16">
                                    <path
										d="M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1" />
                                </svg> <i class="fas fa-heart m-1 me-md-2"></i>
								<p class="d-none d-md-block mb-0 text-white">Logout</p>
							</a>
						</div>
					</div>
					<!-- Right elements -->

					<!-- Center elements -->
					<div class="col-lg-5 col-md-12 col-12"></div>
					<!-- Center elements -->
				</div>
			</div>
		</div>
		<!-- Jumbotron -->

		<!-- Navbar -->
		<nav class="navbar navbar-expand-lg navbar-light bg-white">
			<!-- Container wrapper -->
			<div
				class="container justify-content-center justify-content-md-between">
				<!-- Toggle button -->
				<button class="navbar-toggler border py-2 text-dark" type="button"
					data-bs-toggle="collapse" data-bs-target="#navbarLeftAlignExample"
					aria-controls="navbarLeftAlignExample" aria-expanded="false"
					aria-label="Toggle navigation">
					<i class="fas fa-bars"></i>
				</button>

				<!-- Collapsible wrapper -->
				<div class="collapse navbar-collapse" id="navbarLeftAlignExample">
					<!-- Left links -->
					<ul class="navbar-nav me-auto mb-2 mb-lg-0">
						<li class="nav-item"><a class="nav-link text-dark fs-5"
							aria-current="page" href="#">Home</a></li>
						<!-- Navbar dropdown -->
						<div class="btn-group dropend">
							<ul class="navbar-nav">
								<li class="nav-item dropdown">
									<button class="btn dropdown-toggle fs-5"
										data-bs-toggle="dropdown" aria-expanded="false">
										Categorías</button>
									<ul class="dropdown-menu dropdown-menu-dark">
										<!-- Iterar sobre las categorías -->
										<th:block th:each="categoria : ${categorias}">
											<li><a class="dropdown-item"
												th:href="@{'/categoria/' + ${categoria.categoriaId}}"
												th:text="${categoria.nombre}"></a></li>
										</th:block>
									</ul>
								</li>
							</ul>
						</div>
					</ul>
					<!-- Left links -->
				</div>
			</div>
			<!-- Container wrapper -->
		</nav>
		<!-- Navbar -->

		<!-- Carousel -->
		<style>
#carouselExampleSlidesOnly {
	max-width: 45%; /* Ajusta el tamaño máximo del carousel */
	margin: 20px auto; /* Centra el carousel y añade espacio alrededor */
}
</style>

		<div id="carouselExampleSlidesOnly" class="carousel slide"
			data-bs-ride="carousel">
			<div class="carousel-inner">
				<div class="carousel-item active">
					<img src="/img/banner01.jpg" class="d-block w-100 img-fluid"
						alt="Banner 1">
				</div>
				<div class="carousel-item">
					<img src="/img/banner02.jpg" class="d-block w-100 img-fluid"
						alt="Banner 2">
				</div>
				<div class="carousel-item">
					<img src="/img/banner03.jpg" class="d-block w-100 img-fluid"
						alt="Banner 3">
				</div>
			</div>
		</div>
	</header>

	<div class="container">
		<div class="row mt-5">
			<div class="col-4 mb-4" th:each="producto: ${productos}">
				<div class="card" style="width: 18rem;">
					<img width="100%" height="100%" th:src="${producto.urlImagen}"
						class="card-img-top" alt="Product Image">
					<div class="card-body">
						<form th:action="@{/agregar_producto}" th:object="${pedido}"
							method="post">
							<h5 class="card-title" th:text="${producto.nombre}"></h5>
							<p class="card-text">
								<strong>Precio:</strong> S/<span th:text="${producto.precio}"></span><br>
								<strong>Cantidad:</strong> <span th:text="${producto.stock}"></span>
								unidades
							</p>
							<input required name="cant" placeholder="Ingrese cantidad"
								class="form-control mb-3" type="number"> <input
								name="prodId" type="hidden" th:value="${producto.productoId}">
							<button type="submit" class="btn btn-primary">Agregar +</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Modal -->
	<div class="modal fade" id="exampleModal" tabindex="-1"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Carrito de
						compras</h5>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>

				<div class="modal-body">
					<div class="container-fluid">
						<table class="table">
							<thead>
								<tr>
									<th scope="col">ID</th>
									<th scope="col">Imagen</th>
									<th scope="col">Nombre</th>
									<th scope="col">precio</th>
									<th scope="col">cantidad</th>
									<th scope="col">Subtotal</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="ped: ${carrito}">
									<td th:text="${ped.productoEntity.productoId}"></td>
									<td><img width="50px" height="50px"
										th:src="${ped.productoEntity.urlImagen}" alt=""></td>
									<td th:text="${ped.productoEntity.nombre}"></td>
									<td th:text="'S/' + ${ped.productoEntity.precio}"></td>
									<td th:text="${ped.cantidad}"></td>
									<td
										th:text="'S/' + ${ped.cantidad} * ${ped.productoEntity.precio}"></td>
								</tr>
							</tbody>
						</table>
						<div class="text-right">
							<b><span th:text="'Total: S/' + ${total}"></span></b>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary"
						data-dismiss="modal">Cerrar</button>
					<a th:href="@{/generar_pdf}" class="btn btn-primary">Generar Boleta Electronica</a>
				</div>
			</div>
		</div>
	</div>
	
	<script
		src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
		integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
		crossorigin="anonymous"></script>
</body>

</html>
